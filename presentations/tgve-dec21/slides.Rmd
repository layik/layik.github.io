---
title: "Turing Geovisualization Engine"
abstract: ""
author: 
  - L Hama
date: '`r Sys.Date()`'
output:
  revealjs::revealjs_presentation:
    theme: night
    self_contained: false
    reveal_options:
      slideNumber: true
      previewLinks: true
bibliography: refs.bib
# <section data-background-image="https://user-images.githubusercontent.com/408568/84669610-f1dda000-af1c-11ea-8622-18570449ba70.png"st ></section>
#    <br/>    
#    <br/>
---

# Who?
- [Nik Lomax](https://environment.leeds.ac.uk/geography/staff/1064/dr-nik-lomax) 
  - Associate Professor of Data Analytics for Population Research
- [Roger Beecham](https://environment.leeds.ac.uk/geography/staff/1003/dr-roger-beecham)
  - Lecturer in Geographic Data Science, co-leader of the Centre for Spatial Analysis and Policy (CSAP)
  
- Layik Hama

# What?

<div class="container">
<div class="col">
> The Turing Geovisualisation Engine (TGVE) is an open source, web-based, interactive visual analytics tool for geospatial[@zou2018overview] data analysis, built using R and React (JavaScript).

</div><div class="col">
<img style="max-height:50vh" alt="tgve home" src="https://user-images.githubusercontent.com/408568/137463237-014ff068-0966-47f9-b7fe-fbb91d85bf9b.png">
</div></div>

# why (rationale)?

- We needed it even before the funding (2019)
- Geovisualization is tough
- Mainstream data science workflows has gaps for geovisualization 
- Web enables interactivity in data science (both in R and Python)
- To discover new methods and techniques
- We can and are inspired by giants like Tableau et al.

> "The most profound technologies are those that disappear" 

~ [@weiser1991computer]

# So far

<div class="container">
<div class="col">
![SaferActive TGVE](https://user-images.githubusercontent.com/408568/134366068-ccbb553b-df85-4cfb-afea-e3bbf396d3fd.png)
</div>
<div class="col">
* "stable" but still labelled "beta" npm package
* showcased two national scale datasets
* new R package `tgver` (not on CRAN yet)
* scalable, decoupled and production grade application

</div>
</div>

# Paradigm

<img alt="R & JS" src="https://user-images.githubusercontent.com/408568/147229407-4944d4a2-09ce-4710-be42-3227ca31a260.png" width="100%"/>

- RStudio and others drive JS from R (Shiny)
- TGVE keeps them (R & JS) separate completely


# The npm package (1)

- Easy usage in various environments (web, mobile, desktop and GitHub pages)
  - data democratization
- API driven development
- Automating laborious tasks (Smart)
- Current challenge: modular and extensible

# The npm package (2)

```{JavaScript}
function App() {
  return (
    <Eatlas 
    defaultURL='https://api.coronavirus.data.gov.uk/v1/data?filters=areaType=utla&structure={"date":"date","newCases":"newCasesBySpecimenDate","ctyua19cd":"areaCode"}&format=csv'
    geographyURL='https://raw.githubusercontent.com/tgve/example-data/main/utlas.geojson'
    geographyColumn='ctyua19cd'
    column="newCases"
    dark="false"
    />
  );
}
```

# R package: tgver (1)
```{r, eval=FALSE}
# eval=FALSE
tgver::tgve()
```
```{r}
knitr::include_url("https://tgve.github.io/app/?defaultURL=https://raw.githubusercontent.com/tgve/example-data/main/casualties_100.geojson")
```


# tgver (2)

<div class="container">
<div class="col">
<img alt="RStudio"
 src="https://user-images.githubusercontent.com/408568/141796882-2cf68f6b-a6e4-4836-9efa-bf1973f5cab9.png" />
</div>
<div class="col">

1. do interactive geospatial analysis and visualization fast.
2. use Râ€™s echo-system to drive (1) 
3. facilitate web application deployment for production
4. discover/research

</div></div>

# tgver (3)

- For (1) Advanced geospatial analysis, one vignette is in.
- for (2) more docs and emphasis? Shiny/IPyWidget comparison. Why not URL params?
- For (3) the package needs more functions. We can leave this for future versions

# tgver (4) - time permitting

The R vignette: https://tgve.github.io/tgver/articles/r-and-js.html

# Highlight (1)

<h2> API variables in URL </h2>

We can pass data and geography sources (all API values) to an instance of the TGVE.

- use the same instance with different datasets
- easy use in R and Python workflows (Rmarkdown & Jupyter respectively)
- like: `www.instance.com?defaultURL=url&geographyURL=geoURL&geographycolumn=name`
- future versions: `www.instance.com?...filter={column:[1,2]}`

# Highlight (2)
<h3> Jupyter without IPyWidgets </h3>

<img alt="kaggle" src="https://user-images.githubusercontent.com/408568/147249542-fccdfb53-0fa9-4dc7-bf08-9c081d70d279.png" width="70%"/>

https://www.kaggle.com/layikhama/jupyter-tgve

# Showcase SPENSER
```{r}
knitr::include_url("https://geospenser.com")
```

# Showcase SaferActive

```{r}
knitr::include_url("https://map.saferactive.org?")
```

# Desktop

- Build Tools use Rust Lang
- Using WebAssembly & WebViews
- TGVE npm package in a CRA app is Tauri compliant
- More at: https://github.com/tgve/tgvejs

<img alt="kaggle" src="https://user-images.githubusercontent.com/408568/149109939-ce8c300d-933d-4cdd-99a1-2e5e5d4900a1.png" width="50%"/>

# Build community

<div class="container">
<div class="col">
- Break grounds?
- Ask for features?
- Your help!

</div>
<div class="col">
<img alt="RStudio"
src="https://miro.medium.com/max/1400/1*uPU7iG4_TJYenjuY8J8WWQ.png">
Image credit: https://medium.com/@jeremymeiss/on-open-source-and-building-communities-8a26d4712d68
</div>
</div>

# Future

- Obvious
  - Novel visualization layers
  - Automated geography detection
  - Dataset report generation

- AI module(s)? 
  - VISAI?
  - Data profiling?

# Conclusions

- Current functionality is enough to get the packages out
- Funding to collaborate with Turing REG (Research Engineering Group) 
- Continue developing The TGVE
- Continue building a community around TGVE

# Thank you

* ATI: www.turing.ac.uk/research/research-projects/turing-geovisualization-engine
* GH: www.github.com/tgve
* Recent visualization paper - [@ijgi10040213]

<!-- <iframe src="https://github.com/tgve"></iframe> -->
<img alt="tgve home" src="https://user-images.githubusercontent.com/408568/137463237-014ff068-0966-47f9-b7fe-fbb91d85bf9b.png">


# References


<style>
.box {
    border-radius: 3px;
    position: relative;  /*  <--- */
    font-style: italic;
    text-align: center;
    padding: 1rem 1.2rem;
    /* width: 80%;   create space for the quotes */
    color: #4a4a4a;
    margin: 1rem auto 2rem;
    color: #4a4a4a;
    background: #E8E8E8;
}
/* -- create the quotation marks -- */
.box:before,
.box:after{
    font-family: FontAwesome;
    position: absolute;
    /* -- inside the relative position of blockquote -- */
    top: 13px;
    color: #E8E8E8;
    font-size: 34px;
}
.box:before{
    content: "\f10d";
    margin-right: 13px;
    right: 100%;
}
.box:after{
    content: "\f10e";
    margin-left: 13px;
    left: 100%;  
}

.container{
    display: flex;
}
.col ul, .col ol {
  padding-top: 20px;
}

.col{
    max-width:50%;
    flex: 1;
}
body {
    background-image: url(https://resources.library.leeds.ac.uk/final-chapter/img/logo_min_upperx.png);
    background-size: 10%;
    background-repeat: no-repeat;
    background-position: 3% 96%;
}
</style>
<!-- https://user-images.githubusercontent.com/408568/118673703-2161f000-b7f1-11eb-84af-1fd3b15a94cd.png -->
